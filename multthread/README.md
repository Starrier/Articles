# 多线程

### 什么是线程安全？

当一个程序对一个线程安全的方法或者语句进行访问的时候，其他线程不能在对其进行操作，必须等到当前正在访问的线程结束后才能对这个线程安全的方法进行访问。

你的代码所在的进程中有多个线程在同时运行，而这些线程可能会同时运行一段代码，如果每次运行结果和单线程运行的结果是一样的，而且其他的变量的值也和预期的是一样的。那么就是线程安全的 。

一个类或者程序所提供的接口对于线程来说是原子操作或者多个线程之间的切换不会导致该接口的执行结果存在二义性，也就是我们说不用考虑同步的问题。

线程安全问题都是由全局变量和静态变量引起的。

若每个线程中对全局变量、静态变量只有读操作，而无写操作，一般来说，这个全局变量是线程安全的，若有多个线程同时执行写操作，一般都需要考虑线程同步，否则就可能影响线程安全。

存在竞争的线程不安全，不存在竞争的线程就是安全的。

无论是实现 Runnable 实例，还是 Callable 实例所表示的任务，只要我们将其提交给线程池执行，那么这些任务就是异步任务。

Runnable 实例表示异步任务

优点

任务既可以交给一个专门的工作者线程（以相应的 Runnable 实例为参数创建并启动一个工作者线程），也可以交给一个线程池或者 Executor 的其他实现类来执行。

缺点

我们无法直接获取任务的执行结果。

Callable 实例来表示异步任务

优点

我们可以通过 ThreadPoolExecutor.submit\(Callable&lt;T&gt;\) 的返回值获取任务的处理结果

缺点

Callable 实例表示的异步任务只能交给线程池执行，而无法直接交给一个专门的工作者线程或者 Executor 实现类执行。因此 Callable 实例来标识异步任务会使任务执行方法的灵活性大为受限。

